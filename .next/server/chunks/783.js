exports.id=783,exports.ids=[783],exports.modules={7023:(e,r,t)=>{Promise.resolve().then(t.bind(t,3044))},9239:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},3044:(e,r,t)=>{"use strict";t.r(r),t.d(r,{DbProvider:()=>c,useDbContext:()=>i});var s=t(5344),o=t(3729),a=t(6026),n=t(5773);let l={people:[],expenses:[],settlements:[],groups:[],categories:[],currencies:[],selectedCurrency:"INR",selectedGroup:null,balances:{all:{}},darkMode:!1},d=(0,o.createContext)(void 0),c=({children:e})=>{let[r,t]=(0,o.useState)(l),[c,i]=(0,o.useState)(!0),[p,u]=(0,o.useState)(null),g=(0,a.h)(),m=async()=>{i(!0),u(null);try{let[e,r,s,o,a,l]=await Promise.all([g.people.getAll(),g.expenses.getAll(),g.groups.getAll(),g.settlements.getAll(),g.categories.getAll(),g.currencies.getAll()]),d=localStorage.getItem("userSettings"),c=d?JSON.parse(d):{selectedCurrency:"INR",selectedGroup:null,darkMode:!1},i=(0,n.Xd)(e,r,o,l,c.selectedCurrency);t({people:e,expenses:r,groups:s,settlements:o,categories:a,currencies:l,selectedCurrency:c.selectedCurrency,selectedGroup:c.selectedGroup,balances:i,darkMode:c.darkMode})}catch(e){console.error("Error loading data:",e),u(e instanceof Error?e:Error("Failed to load data"))}finally{i(!1)}};(0,o.useEffect)(()=>{m()},[]),(0,o.useEffect)(()=>{"undefined"!=typeof document&&(r.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")),localStorage.setItem("userSettings",JSON.stringify({selectedCurrency:r.selectedCurrency,selectedGroup:r.selectedGroup,darkMode:r.darkMode}))},[r.darkMode,r.selectedCurrency,r.selectedGroup]),(0,o.useEffect)(()=>{let e=(0,n.Xd)(r.people,r.expenses,r.settlements,r.currencies,r.selectedCurrency);t(r=>({...r,balances:e}))},[r.people,r.expenses,r.settlements,r.currencies,r.selectedCurrency]);let y=async e=>{try{let r=await g.people.create(e);t(e=>({...e,people:[...e.people,r]}))}catch(e){throw console.error("Error adding person:",e),e}},h=async e=>{try{await g.people.delete(e),t(r=>({...r,people:r.people.filter(r=>r.id!==e),expenses:r.expenses.filter(r=>r.paidBy!==e&&!r.splitAmong?.some(r=>r.personId===e)),settlements:r.settlements.filter(r=>r.fromPersonId!==e&&r.toPersonId!==e)}))}catch(e){throw console.error("Error removing person:",e),e}},x=async e=>{try{let r=await g.expenses.create(e);t(e=>({...e,expenses:[...e.expenses,r]}))}catch(e){throw console.error("Error adding expense:",e),e}},E=async e=>{try{await g.expenses.delete(e),t(r=>({...r,expenses:r.expenses.filter(r=>r.id!==e)}))}catch(e){throw console.error("Error removing expense:",e),e}},f=async e=>{try{let r=await g.expenses.update(e.id,e);t(e=>({...e,expenses:e.expenses.map(e=>e.id===r.id?r:e)}))}catch(e){throw console.error("Error updating expense:",e),e}},w=async e=>{try{let r=await g.groups.create(e);t(e=>({...e,groups:[...e.groups,r]}))}catch(e){throw console.error("Error adding group:",e),e}},b=async e=>{try{await g.groups.delete(e),t(r=>({...r,groups:r.groups.filter(r=>r.id!==e),expenses:r.expenses.map(r=>r.groupId===e?{...r,groupId:void 0}:r),settlements:r.settlements.map(r=>r.groupId===e?{...r,groupId:void 0}:r),selectedGroup:r.selectedGroup===e?null:r.selectedGroup}))}catch(e){throw console.error("Error removing group:",e),e}},I=async e=>{try{let r=await g.groups.update(e.id,e);t(e=>({...e,groups:e.groups.map(e=>e.id===r.id?r:e)}))}catch(e){throw console.error("Error updating group:",e),e}},v=async e=>{try{let r=await g.settlements.create(e);t(e=>({...e,settlements:[...e.settlements,r]}))}catch(e){throw console.error("Error adding settlement:",e),e}},P=async e=>{try{await g.settlements.delete(e),t(r=>({...r,settlements:r.settlements.filter(r=>r.id!==e)}))}catch(e){throw console.error("Error removing settlement:",e),e}},S=async e=>{try{let r=await g.categories.create(e);t(e=>({...e,categories:[...e.categories,r]}))}catch(e){throw console.error("Error adding category:",e),e}},k=async e=>{try{await g.categories.delete(e),t(r=>({...r,categories:r.categories.filter(r=>r.id!==e||!r.isCustom),expenses:r.expenses.map(r=>r.categoryId===e?{...r,categoryId:"other"}:r)}))}catch(e){throw console.error("Error removing category:",e),e}},C=async()=>{await m()};return s.jsx(d.Provider,{value:{state:r,loading:c,error:p,addPerson:y,removePerson:h,addExpense:x,removeExpense:E,updateExpense:f,addGroup:w,removeGroup:b,updateGroup:I,addSettlement:v,removeSettlement:P,addCategory:S,removeCategory:k,setSelectedCurrency:e=>{t(r=>({...r,selectedCurrency:e}))},setSelectedGroup:e=>{t(r=>({...r,selectedGroup:e}))},toggleDarkMode:()=>{t(e=>({...e,darkMode:!e.darkMode}))},refreshData:C},children:e})},i=()=>{let e=(0,o.useContext)(d);if(void 0===e)throw Error("useDbContext must be used within a DbProvider");return e}},6026:(e,r,t)=>{"use strict";t.d(r,{h:()=>n});var s=t(3729);let o=()=>"";async function a(e,r="GET",t){let s=o(),a=`${s}${e}`,n={method:r,headers:{"Content-Type":"application/json"}};t&&(n.body=JSON.stringify(t));let l=await fetch(a,n);if(!l.ok)throw Error((await l.json().catch(()=>({}))).error||`API error: ${l.status}`);return l.json()}function n(){let[e,r]=(0,s.useState)(!1),[t,o]=(0,s.useState)(null),n=async(e,t="GET",s)=>{r(!0),o(null);try{return await a(e,t,s)}catch(r){let e=r instanceof Error?r:Error("Unknown error");throw o(e),e}finally{r(!1)}};return{loading:e,error:t,people:{getAll:()=>n("/api/people"),getById:e=>n(`/api/people/${e}`),create:e=>n("/api/people","POST",{name:e}),update:(e,r)=>n(`/api/people/${e}`,"PUT",{name:r}),delete:e=>n(`/api/people/${e}`,"DELETE")},expenses:{getAll:()=>n("/api/expenses"),getById:e=>n(`/api/expenses/${e}`),create:e=>n("/api/expenses","POST",e),update:(e,r)=>n(`/api/expenses/${e}`,"PUT",r),delete:e=>n(`/api/expenses/${e}`,"DELETE")},groups:{getAll:()=>n("/api/groups"),getById:e=>n(`/api/groups/${e}`),create:e=>n("/api/groups","POST",e),update:(e,r)=>n(`/api/groups/${e}`,"PUT",r),delete:e=>n(`/api/groups/${e}`,"DELETE")},settlements:{getAll:()=>n("/api/settlements"),create:e=>n("/api/settlements","POST",e),delete:e=>n(`/api/settlements/${e}`,"DELETE")},categories:{getAll:()=>n("/api/categories"),create:e=>n("/api/categories","POST",{name:e,isCustom:!0}),delete:e=>n(`/api/categories/${e}`,"DELETE")},currencies:{getAll:()=>n("/api/currencies")}}}},5773:(e,r,t)=>{"use strict";t.d(r,{NI:()=>l,Xd:()=>a,qn:()=>n,xG:()=>s});let s=(e,r,t)=>{let s=t.find(e=>e.code===r)||{code:"USD",symbol:"$",name:"US Dollar",exchangeRate:1};return new Intl.NumberFormat("en-US",{style:"currency",currency:s.code,currencyDisplay:"symbol"}).format(e)},o=(e,r,t,s)=>e/(s.find(e=>e.code===r)?.exchangeRate||1)*(s.find(e=>e.code===t)?.exchangeRate||1),a=(e,r,t,s,a)=>{let n={all:{}};return e.forEach(r=>{n.all[r.id]||(n.all[r.id]={}),e.forEach(e=>{r.id!==e.id&&(n.all[r.id][e.id]=0)})}),r.forEach(r=>{let t=r.paidBy,l=r.groupId||"no-group";n[l]||(n[l]={},e.forEach(r=>{n[l][r.id]={},e.forEach(e=>{r.id!==e.id&&(n[l][r.id][e.id]=0)})})),r.splitAmong.forEach(e=>{if(e.personId!==t){let d=o(e.amount,r.currency,a,s);n[l][t][e.personId]=(n[l][t][e.personId]||0)+d,n[l][e.personId][t]=(n[l][e.personId][t]||0)-d,n.all[t][e.personId]=(n.all[t][e.personId]||0)+d,n.all[e.personId][t]=(n.all[e.personId][t]||0)-d}})}),t.forEach(e=>{let r=e.fromPersonId,t=e.toPersonId,l=e.groupId||"no-group",d=o(e.amount,e.currency,a,s);n[l]&&(n[l][r][t]=(n[l][r][t]||0)+d,n[l][t][r]=(n[l][t][r]||0)-d),n.all[r][t]=(n.all[r][t]||0)+d,n.all[t][r]=(n.all[t][r]||0)-d}),Object.keys(n).forEach(r=>{e.forEach(t=>{e.forEach(e=>{t.id!==e.id&&n[r]?.[t.id]?.[e.id]>0&&n[r]?.[e.id]?.[t.id]>0&&(n[r][t.id][e.id]>n[r][e.id][t.id]?(n[r][t.id][e.id]-=n[r][e.id][t.id],n[r][e.id][t.id]=0):(n[r][e.id][t.id]-=n[r][t.id][e.id],n[r][t.id][e.id]=0))})})}),n},n=(e,r,t)=>{let s=r||"all",o=0;return t[s]&&t[s][e]?(Object.keys(t[s]).forEach(r=>{r!==e&&t[s][r][e]<0&&(o+=Math.abs(t[s][r][e]))}),Object.keys(t[s][e]||{}).forEach(r=>{t[s][e][r]<0&&(o-=Math.abs(t[s][e][r]))}),o):0},l=(e,r,t,s)=>{let a={};return e.filter(e=>!r||e.groupId===r).forEach(e=>{let r=o(e.amount,e.currency,s,t);a[e.categoryId]=(a[e.categoryId]||0)+r}),Object.keys(a).map(e=>({categoryId:e,amount:a[e],currency:s}))}},9205:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u,metadata:()=>p});var s=t(5036),o=t(8592),a=t.n(o);t(7272);var n=t(6843);let l=(0,n.createProxy)(String.raw`/Users/vedu/Documents/splitwise/app/lib/dbContext.tsx`),{__esModule:d,$$typeof:c}=l;l.default;let i=(0,n.createProxy)(String.raw`/Users/vedu/Documents/splitwise/app/lib/dbContext.tsx#DbProvider`);(0,n.createProxy)(String.raw`/Users/vedu/Documents/splitwise/app/lib/dbContext.tsx#useDbContext`);let p={title:"Splitwise - Expense Sharing App",description:"A simple expense splitting application"};function u({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:`${a().className} bg-background dark:bg-background-dark text-text dark:text-text-dark`,children:s.jsx(i,{children:s.jsx("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e})})})})}},7272:()=>{}};